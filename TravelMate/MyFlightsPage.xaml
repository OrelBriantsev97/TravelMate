<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:TravelMate.Controls"
             x:Class="TravelMate.MyFlightsPage"
             NavigationPage.HasNavigationBar="False"
             BackgroundColor="#C1ECF5">

    <Grid RowDefinitions="Auto, *, Auto">
        <!-- Page Title -->
        <Label Text="My Flights" FontSize="36" FontAttributes="Bold" TextColor="#3b6069"
               HorizontalOptions="Center" Margin="0,70,0,10" FontFamily="Chi"/>

        <!-- Scrollable Flights List -->
        <ScrollView Grid.Row="1">
            <!-- Wrapped StackLayout inside ScrollView -->
            <StackLayout Padding="20">
                <CollectionView x:Name="FlightsListView" ItemsSource="{Binding Flights}"
                                SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="White" CornerRadius="10" Margin="10" Padding="15" HasShadow="True">
                                <StackLayout>
                                    <Label Text="{Binding FlightNumber}" FontFamily="Chi" FontAttributes="Bold" 
                                           TextColor="#3b6069" FontSize="22" HorizontalOptions="CenterAndExpand"/>
                                    <Label Text="{Binding Airline}" TextColor="Gray" HorizontalOptions="CenterAndExpand"/>

                                    <Grid ColumnDefinitions="Auto, *, Auto" VerticalOptions="Center" Margin="10,0">
                                        <Label Text="{Binding DepartureCity}" TextColor="Black" FontSize="16" Grid.Column="0" HorizontalTextAlignment="Start"/>
                                        <BoxView Grid.Column="1" HeightRequest="1" WidthRequest="200" BackgroundColor="Gray" VerticalOptions="Center" HorizontalOptions="Fill"/>
                                        <Label Text="{Binding ArrivalCity}" TextColor="Black" FontSize="16" Grid.Column="2" HorizontalTextAlignment="End"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto, *, Auto" VerticalOptions="Center" Margin="10,0">
                                        <Label Text="{Binding DepartureDate}" TextColor="Black" FontSize="14" Grid.Column="0" HorizontalTextAlignment="Start" Margin="-10,0,0,0"/>
                                        <Label Text="{Binding ArrivalDate}" TextColor="Black" FontSize="14" Grid.Column="2" HorizontalTextAlignment="End" Margin="0,0,-10,0"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto, *">
                                        <Label Text="{Binding DepartureTime}" TextColor="Gray" FontSize="14" Grid.Column="0" HorizontalTextAlignment="Start"/>
                                        <Label Text="{Binding ArrivalTime}" TextColor="Gray" FontSize="14" Grid.Column="1" HorizontalTextAlignment="End"/>
                                    </Grid>
                                    
                                </StackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <!-- Add New Flight Button -->
                <Label Text="âž• Add New Flight" TextColor="Black" FontSize="18" FontFamily="Chi"
                       FontAttributes="Bold" HorizontalOptions="Center" Margin="0,10,0,20">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="addFlight"/>
                    </Label.GestureRecognizers>
                </Label>
            </StackLayout>
        </ScrollView>

        <!-- Navigation Container -->
        <Grid Grid.Row="2">
            <ContentView x:Name="NavigationContainer"/>
        </Grid>
    </Grid>
</ContentPage>
