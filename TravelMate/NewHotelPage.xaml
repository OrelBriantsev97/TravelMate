<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TravelMate.NewHotelPage"
             NavigationPage.HasNavigationBar="False"
             BackgroundColor="#C1ECF5">

    <VerticalStackLayout Padding="10" Spacing="10" Margin="5,0,0,0">

        <!-- Title -->
        <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Padding="5">
            <Label Text="Upcoming Bookings"
                   FontFamily="sans-serif"
                   TextColor="#32545c"
                   FontSize="30"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"
                   Margin="0,100,0,20"/>
        </StackLayout>

        <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Padding="5">
            <Label Text="Where are you staying next?"
                   FontFamily="Chi"
                   FontSize="22"
                   TextColor="#3b6069"
                   VerticalOptions="StartAndExpand"
                   Margin="0,-40,0,0"/>
        </StackLayout>

        <!-- Hotel Name -->
        <Frame BackgroundColor="White" Padding="5" HasShadow="True">
            <StackLayout Orientation="Horizontal" Spacing="10">
                <Image Source="Resources/Images/hotel.png" WidthRequest="25" HeightRequest="25" VerticalOptions="Center" />
                <Entry Text="{Binding HotelName}"
                       FontFamily="sans-serif"
                       Placeholder="Hotel Name"
                       FontSize="18"
                       TextColor="#333333"
                       PlaceholderColor="#888888" />
            </StackLayout>
        </Frame>

        <!-- City -->
        <Frame BackgroundColor="White" Padding="5" HasShadow="True">
            <StackLayout Orientation="Horizontal" Spacing="10">
                <Image Source="Resources/Images/origin.png" WidthRequest="25" HeightRequest="25" VerticalOptions="Center" />
                <Entry Text="{Binding City}"
                       Placeholder="City"
                       FontSize="18"
                       FontFamily="sans-serif"
                       TextColor="#333333"/>
            </StackLayout>
        </Frame>

        <!-- Check-in Date -->
        <Frame BackgroundColor="White" Padding="5" HasShadow="True">
            <StackLayout Orientation="Horizontal" Spacing="10">
                <Image Source="calendar_icon.png" WidthRequest="25" HeightRequest="25" VerticalOptions="Center" />
                <DatePicker Date="{Binding CheckInDate}"
                            FontSize="18"
                            FontFamily="sans-serif"
                            TextColor="#333333" />
            </StackLayout>
        </Frame>

        <!-- Check-out Date -->
        <Frame BackgroundColor="White" Padding="5" HasShadow="True">
            <StackLayout Orientation="Horizontal" Spacing="10">
                <Image Source="calendar_icon.png" WidthRequest="25" HeightRequest="25" VerticalOptions="Center" />
                <DatePicker Date="{Binding CheckOutDate}"
                            FontSize="18"
                            FontFamily="sans-serif"
                            TextColor="#333333"/>
            </StackLayout>
        </Frame>

        <!-- Search Hotels -->
        <Button Text="Search Hotels"
                Command="{Binding SearchHotelCommand}"
                BackgroundColor="#7ea3ab"
                TextColor="White"
                FontAttributes="Bold"
                CornerRadius="10"
                FontFamily="PlayWrite"
                FontSize="16"
                HeightRequest="50"/>

        <!-- Skip for now -->
        <Label Text="Skip for now"
               TextColor="Black"
               FontSize="18"
               FontFamily="Chi"
               FontAttributes="Bold"
               HorizontalOptions="Center"
               Margin="0,10,0,20">
            <Label.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding SkipCommand}" />
            </Label.GestureRecognizers>
        </Label>

        <!-- Hotel Result Section (Static Binding - Still managed via code-behind for now) -->
        <StackLayout x:Name="HotelResultStack" Padding="10" Spacing="25" IsVisible="{Binding IsHotelResultVisible}">
            <Frame Padding="10" CornerRadius="10" HasShadow="True">
                <StackLayout Orientation="Horizontal">
                    <Image Source="{Binding SelectedHotel.LogoUrl}" HeightRequest="150" Aspect="AspectFill" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand"/>

                    <StackLayout Padding="10" VerticalOptions="Center">
                        <Label Text="{Binding SelectedHotel.HotelName}" FontSize="20" FontAttributes="Bold" TextColor="#7ea3ab" FontFamily="sans-serif" LineBreakMode="WordWrap"
                               MaxLines="2" WidthRequest="200" Margin="0,-40,0,0"/>
                        <StackLayout Orientation="Horizontal">
                            <Image x:Name="Star1" Source="star_icon.png" WidthRequest="20" HeightRequest="20" IsVisible="False"/>
                            <Image x:Name="Star2" Source="star_icon.png" WidthRequest="20" HeightRequest="20" IsVisible="False"/>
                            <Image x:Name="Star3" Source="star_icon.png" WidthRequest="20" HeightRequest="20" IsVisible="False"/>
                            <Image x:Name="Star4" Source="star_icon.png" WidthRequest="20" HeightRequest="20" IsVisible="False"/>
                            <Image x:Name="Star5" Source="star_icon.png" WidthRequest="20" HeightRequest="20" IsVisible="False"/>
                        </StackLayout>

                        <Label Text="{Binding SelectedHotel.HotelClass}" FontSize="14" TextColor="#4f818c" FontFamily="sans-serif"/>
                        <Label Text="{Binding SelectedHotel.Address}" FontSize="14" TextColor="#666666" FontFamily="sans-serif" LineBreakMode="WordWrap"
                               MaxLines="2" WidthRequest="200"/>
                        <Label Text="{Binding SelectedHotel.Phone}" FontSize="14" TextColor="#666666" FontFamily="sans-serif" LineBreakMode="TailTruncation"
                               MaxLines="3" WidthRequest="200"/>
                        <Label x:Name="LatitudeLabel" IsVisible="False"/>
                        <Label x:Name="LongitudeLabel" IsVisible="False"/>
                        <Label x:Name="NearbyPlacesLabel" IsVisible="False"/>
                        <Label x:Name="HotelAmenitiesLabel" IsVisible="False"/>
                    </StackLayout>
                </StackLayout>

                <!-- Tap to Add Hotel -->
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnHotelTapped"/>
                </Frame.GestureRecognizers>
            </Frame>
        </StackLayout>

    </VerticalStackLayout>
</ContentPage>
